{% extends "base.html" %}

{% block title %}Chat - {{ course.title }} - EduTrack{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Course Chat - {{ course.title }}</h2>
    <a href="{{ url_for('course.teacher_dashboard' if session.get('role') == 'teacher' else 'course.student_dashboard') }}" class="btn btn-secondary">Back to Dashboard</a>
</div>

<div class="chat-container">
    <div class="chat-messages">
        {% if messages %}
            {% for msg in messages %}
            <div class="chat-message">
                <div class="chat-message-header">
                    <span class="chat-message-sender">{{ msg.get('sender_name', 'Unknown') }}</span>
                    <span class="chat-message-time">{{ msg.get('timestamp', '') }}</span>
                </div>
                <div>{{ msg.get('message', '') }}</div>
            </div>
            {% endfor %}
        {% else %}
            <p class="text-center" style="color: #666; padding: 2rem;">No messages yet. Start the conversation!</p>
        {% endif %}
    </div>
    <form method="POST" class="chat-input-form">
        <input type="text" name="message" class="chat-input" placeholder="Type a message..." required maxlength="1000">
        <button type="submit" class="btn btn-primary">Send</button>
    </form>
</div>
{% endblock %}